{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","components/Notification.js","services/contacts.js","App.js","index.js"],"names":["PersonsForm","newName","handleChangeName","newNumber","handleChangeNumber","addName","value","placeholder","onChange","minLength","type","onClick","Persons","list","Filter","props","filterName","handleChangeFilter","Notification","message","error","className","style","color","baseURL","axios","get","then","response","data","newObject","post","id","request","delete","console","log","put","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterName","setMessage","messageIsError","setMessageIsError","useEffect","contactService","initialPersons","makeMessage","setTimeout","deleteContact","toBeDeletedPerson","find","p","name","window","confirm","filter","catch","personsList","x","str","toLowerCase","subStr","indexOf","map","key","number","e","target","PersonForm","preventDefault","newPerson","toBeChangedPerson","length","addedContact","concat","ReactDOM","render","document","getElementById"],"mappings":"qNAoBeA,EAlBK,SAAC,GAAyE,IAAxEC,EAAuE,EAAvEA,QAAQC,EAA+D,EAA/DA,iBAAkBC,EAA6C,EAA7CA,UAAWC,EAAkC,EAAlCA,mBAAoBC,EAAc,EAAdA,QAE3E,OACI,8BACA,sCACQ,2BAAOC,MAAOL,EAASM,YAAY,eAAeC,SAAUN,EAAkBO,UAAU,OAEhG,wCACU,2BAAOH,MAAOH,EAAWI,YAAY,aAAaC,SAAUJ,EAAoBK,UAAU,OAEpG,6BACE,4BAAQC,KAAK,SAASC,QAASN,GAA/B,UCDKO,EAVC,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACf,OACI,oCACA,uCACA,6BAAMA,KCMCC,EAVA,SAACC,GAEZ,OACI,gDACgB,2BAAOT,MAAOS,EAAMC,WAAYT,YAAY,YAAYC,SAAUO,EAAME,uBCe/EC,EAnBI,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,MAQ7B,OAAgB,OAAZD,EACK,KAGL,yBAAKE,UAAU,SAASC,MAAOF,EARhB,CACjBG,MAAO,OAJW,CAClBA,MAAO,UAWFJ,I,gBCbLK,EAAU,eAyBD,EAvBQ,WAEnB,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAqB9B,EAlBO,SAACC,GAGnB,OAFgBL,IAAMM,KAAKP,EAASM,GAErBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAe9B,EAZO,SAACG,GACnB,IAAMC,EAAUR,IAAMS,OAAOV,EAAQ,IAAIQ,GAGzC,OAFAG,QAAQC,IAAIJ,GACZG,QAAQC,IAAIH,GACLA,EAAQN,MAAK,SAAAC,GAAQ,OAAIA,MAQrB,EALQ,SAACI,EAAIF,GAExB,OADgBL,IAAMY,IAAIb,EAAQ,IAAIQ,EAAIF,GAC3BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCwJ9BS,EAxKH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTC,EADS,KACAC,EADA,OAEcF,mBAAS,iBAFvB,mBAETtC,EAFS,KAEAyC,EAFA,OAGkBH,mBAAS,IAH3B,mBAGTpC,EAHS,KAGEwC,EAHF,OAIoBJ,mBAAS,IAJ7B,mBAITvB,EAJS,KAIG4B,EAJH,OAKcL,mBAAS,MALvB,mBAKTpB,EALS,KAKA0B,EALA,OAM4BN,oBAAS,GANrC,mBAMTO,EANS,KAMOC,EANP,KAShBC,qBAAU,WACRb,QAAQC,IAAI,UACZa,IACGtB,MAAK,SAACuB,GACLf,QAAQC,IAAI,qBACZK,EAAWS,QAEd,IAGHF,qBAAU,WACRb,QAAQC,IAAI,WAAYI,KACvB,CAACA,IAIJ,IAaMW,EAAc,SAAChC,GACnB0B,EAAW1B,GACXiC,YAAW,WACTP,EAAW,MACXE,GAAkB,KACjB,MAECM,EAAgB,SAACrB,GACrB,IAAIsB,EAAoBd,EAAQe,MAAK,SAAAC,GAAC,OAAIA,EAAExB,KAAOA,KAAIyB,KAEnDC,OAAOC,QAAP,wCAAgDL,EAAhD,4BACFnB,QAAQC,IAAI,UAAWkB,EAAmB,MAAOtB,GACjDiB,EAA6BjB,GAC5BL,MAAK,SAAAC,GACJa,EAAWD,EAAQoB,QAAO,SAAAJ,GAAC,OAAIA,EAAExB,KAAOA,MACxCmB,EAAY,IAAD,OAAKG,EAAL,sCACXP,GAAkB,MAEnBc,OAAM,SAAAzC,GACL+B,EAAY,IAAD,OAAKG,EAAL,sCACXP,GAAkB,GAClBN,EAAWD,EAAQoB,QAAO,SAAAJ,GAAC,OAAIA,EAAExB,KAAOA,SAE1CmB,EAAY,IAAD,OAAKG,EAAL,sCACXP,GAAkB,IAElBZ,QAAQC,IAAI,gBA6DZ0B,EAAc,GAuBlB,MAtBmB,KAAf9C,GAEFmB,QAAQC,IAAI,YAEZ0B,EAActB,EACXoB,QAAO,SAACG,GAAD,OAfUC,EAgBDD,EAAEN,KAAKQ,cAhBDC,EAgBgBlD,EAAWiD,cAdhDD,EAAIG,QAAQD,IAAW,EAFR,IAACF,EAAKE,KAkBtBE,KAAI,SAACL,GAAD,OACH,wBAAIM,IAAKN,EAAEN,MACRM,EAAEN,KADL,IACYM,EAAEO,OADd,IACsB,4BAAQ3D,QAAS,kBAAM0C,EAAcU,EAAE/B,MAAvC,iBAK1B8B,EAActB,EAAQ4B,KAAI,SAACL,GAAD,OACxB,wBAAIM,IAAKN,EAAEN,MACRM,EAAEN,KADL,IACYM,EAAEO,OADd,IACsB,4BAAQ3D,QAAS,kBAAM0C,EAAcU,EAAE/B,MAAvC,gBAMxB,6BACE,yCAEA,kBAAC,EAAD,CAAQf,mBA/He,SAACsD,GAE1B3B,EAAc2B,EAAEC,OAAOlE,QA6H2BU,WAAYA,IAC5D,0CACA,kBAACyD,EAAD,CACExE,QAASA,EACTC,iBA/HmB,SAACqE,GAExB7B,EAAW6B,EAAEC,OAAOlE,QA8HhBH,UAAWA,EACXC,mBA7HqB,SAACmE,GAE1B5B,EAAa4B,EAAEC,OAAOlE,QA4HlBD,QAzFU,SAACkE,GACfA,EAAEG,iBAEF,IAAIC,EAAY,CAAElB,KAAMxD,EAASqE,OAAQnE,GACrCyE,EAAoBpC,EAAQe,MAAK,SAAAC,GAAC,OAAIA,EAAEC,OAASxD,KACjDuC,EAAQoB,QAAO,SAACG,GAAD,OAAOA,EAAEN,OAASxD,KAAS4E,OAAS,EACjDnB,OAAOC,QAAP,WAAmBiB,EAAkBnB,KAArC,qFACJR,EAA6B2B,EAAkB5C,GAAI2C,GAClDhD,MAAK,SAACC,GACLa,EAAWD,EAAQ4B,KAAI,SAAAL,GAAC,OAAIA,EAAE/B,KAAO4C,EAAkB5C,GAAK2C,EAAYZ,MACxErB,EAAW,IACXC,EAAa,OAEfQ,EAAY,IAAD,OAAKyB,EAAkBnB,KAAvB,oCAAuDkB,EAAUL,OAAjE,OAEFK,EAAUlB,KAAKoB,OAAS,GACjC1C,QAAQC,IAAI,cACZW,GAAkB,GAClBI,EAAY,mDACFwB,EAAUL,OAAOO,OAAS,GACpC9B,GAAkB,GAClBI,EAAY,+CAGZhB,QAAQC,IAAI,mCACZa,EACe0B,GACdhD,MAAM,SAAAmD,GACL3C,QAAQC,IAAI,YAAaI,GACzBL,QAAQC,IAAI,YAAauC,EAAUlB,KAAMkB,EAAUlB,KAAKoB,OAAS,GACjE1C,QAAQC,IAAI,UAAWI,EAAQuC,OAAOD,IACtCrC,EAAWD,EAAQuC,OAAOD,IAC1BpC,EAAW,IACXC,EAAa,IACbQ,EAAY,IAAD,OAAKwB,EAAUlB,KAAf,qCAEZI,OAAM,SAAAzC,GACLe,QAAQC,IAAIhB,EAAMQ,SAASC,MAC3BkB,GAAkB,GAEnBI,EAAY,qBAAuB/B,EAAMQ,SAASC,KAAKT,cAoDxD,kBAAC,EAAD,CAASP,KAAMiD,IACf,kBAAC,EAAD,CAAc3C,QAASA,EAASC,MAAO0B,M,MCpK7CkC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.39cd69c5.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst PersonsForm = ({newName,handleChangeName, newNumber, handleChangeNumber, addName }) => {\r\n    \r\n    return (\r\n        <form>\r\n        <div>\r\n          Name: <input value={newName} placeholder=\"add new name\" onChange={handleChangeName} minLength=\"3\"/>\r\n        </div>\r\n        <div>\r\n          Number: <input value={newNumber} placeholder=\"add number\" onChange={handleChangeNumber} minLength=\"8\"/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\" onClick={addName}>add</button>\r\n        </div>\r\n        </form>\r\n        )\r\n}\r\n\r\n\r\nexport default PersonsForm","import React from 'react';\r\n\r\nconst Persons = ( {list} ) => {\r\n    return (\r\n        <>\r\n        <h2>Numbers</h2>\r\n        <div>{list}</div>\r\n        </>\r\n        )\r\n}\r\n\r\n\r\nexport default Persons","import React from 'react';\r\n\r\nconst Filter = (props) => {\r\n    //console.log(props, \"props in filer\")\r\n    return (\r\n        <div>\r\n        Filter by name: <input value={props.filterName} placeholder=\"Filter...\" onChange={props.handleChangeFilter}/>\r\n        </div>\r\n        )\r\n}\r\n\r\n\r\nexport default Filter","import React from 'react';\r\n\r\nconst Notification = ({ message, error }) => {\r\n    const succesStyle = {\r\n      color: \"green\"\r\n    }\r\n    const errorStyle = {\r\n      color: \"red\"\r\n    }\r\n\r\n    if (message === null) {\r\n      return null\r\n    } else  {\r\n      return (\r\n        <div className=\"succes\" style={error ? errorStyle : succesStyle}>\r\n          {message}\r\n        </div>\r\n      )\r\n    } \r\n  }\r\n\r\n  export default Notification","import axios from \"axios\"\r\n\r\nconst baseURL = \"/api/persons\"\r\n\r\nconst getAllContacts = () => {\r\n    const request = axios.get(baseURL)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst addNewContact = (newObject) => {\r\n    const request = axios.post(baseURL, newObject)\r\n    //console.log(\"contacts.js - adding:\", newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteContact = (id) => {\r\n    const request = axios.delete(baseURL+\"/\"+id )\r\n    console.log(id)\r\n    console.log(request)\r\n    return request.then(response => response)\r\n}\r\n\r\nconst changeContact  = (id, newObject) => {\r\n    const request = axios.put(baseURL+\"/\"+id, newObject )\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {getAllContacts, addNewContact, deleteContact, changeContact}","import React, { useState, useEffect } from \"react\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Filter from \"./components/Filter\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nimport contactService from \"./services/contacts\"\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"Add name here\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filterName, setFilterName] = useState(\"\");\r\n  const [message, setMessage] = useState(null);\r\n  const [messageIsError, setMessageIsError] = useState(false)\r\n\r\n    \r\n  useEffect(() => {\r\n    console.log(\"effect\")\r\n    contactService.getAllContacts()\r\n      .then((initialPersons) => {\r\n        console.log('promise fulfilled')\r\n        setPersons(initialPersons)\r\n      });\r\n  }, [])\r\n  \r\n  // Used just for logging the changes in persons\r\n  useEffect(() => {\r\n    console.log('Persons:', persons);\r\n  }, [persons]);\r\n\r\n  //console.log('render', persons.length, 'persons')\r\n\r\n  const handleChangeFilter = (e) => {\r\n    //console.log(e.target.value)\r\n    setFilterName(e.target.value);\r\n  };\r\n  const handleChangeName = (e) => {\r\n    //console.log(e.target.value)\r\n    setNewName(e.target.value);\r\n  };\r\n  const handleChangeNumber = (e) => {\r\n    //console.log(e.target.value)\r\n    setNewNumber(e.target.value);\r\n  };\r\n\r\n  const makeMessage = (message) => {\r\n    setMessage(message)\r\n    setTimeout(() => {\r\n      setMessage(null)\r\n      setMessageIsError(false)\r\n    }, 2000)\r\n  }\r\n  const deleteContact = (id) => {\r\n    let toBeDeletedPerson = persons.find(p => p.id === id).name\r\n   // console.log(\"To be deleted\",toBeDeletedPerson)\r\n    if (window.confirm(`Do you really want to delete \"${toBeDeletedPerson}\" from your phonebook?`)) { \r\n      console.log(\"Deleted\", toBeDeletedPerson, \"id:\", id)\r\n      contactService.deleteContact(id)\r\n      .then(response => {\r\n        setPersons(persons.filter(p => p.id !== id))\r\n        makeMessage(`\"${toBeDeletedPerson}\" was deleted from your phonebook`)\r\n        setMessageIsError(true)\r\n      })\r\n      .catch(error => {\r\n        makeMessage(`\"${toBeDeletedPerson}\" was ALREADY removed from SERVER`)\r\n        setMessageIsError(true)\r\n        setPersons(persons.filter(p => p.id !== id))\r\n      })\r\n      makeMessage(`\"${toBeDeletedPerson}\" was deleted from your phonebook`)\r\n      setMessageIsError(true)\r\n    } else {\r\n      console.log(\"Not deleted\")\r\n    }\r\n\r\n  }\r\n\r\n\r\n  const addName = (e) => {\r\n    e.preventDefault();\r\n    //look at at the array of person and if there is not a name like newName then OK, else alert\r\n    let newPerson = { name: newName, number: newNumber };\r\n    let toBeChangedPerson = persons.find(p => p.name === newName)\r\n    if (persons.filter((x) => x.name === newName).length > 0) {  //if person with same name is found\r\n      if (window.confirm(`\"${toBeChangedPerson.name}\" is already added to your phnoebook, replace the old number with the new one?`)) {\r\n      contactService.changeContact(toBeChangedPerson.id, newPerson) //this is in ex 3.17\r\n      .then((response) => {\r\n        setPersons(persons.map(x => x.id === toBeChangedPerson.id ? newPerson : x))\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      })\r\n      makeMessage(`\"${toBeChangedPerson.name}\" number was changed to \"${newPerson.number}\"`)\r\n      }\r\n    } else if (newPerson.name.length < 4) {\r\n      console.log(\"Wrong data\")\r\n      setMessageIsError(true)\r\n      makeMessage(\"Person name must be at least 3 characters long\")    \r\n    }  else if (newPerson.number.length < 9 ) {\r\n      setMessageIsError(true)\r\n      makeMessage(\"Number must be at least 8 characters long\")    \r\n    }\r\n    else {\r\n      console.log(\"person with same name not found\")\r\n      contactService\r\n      .addNewContact(newPerson)\r\n      .then( addedContact => {\r\n        console.log(\"PersonArr\", persons)\r\n        console.log(\"NewPERSON\", newPerson.name, newPerson.name.length < 4)\r\n        console.log(\"adding:\", persons.concat(addedContact) )\r\n        setPersons(persons.concat(addedContact) );  //here should be persons.concat(addedContact)  ? from backend is send full array of persons! \r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n        makeMessage(`\"${newPerson.name}\" was added to your phonebook`)\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response.data)\r\n        setMessageIsError(true)\r\n        //makeMessage(`\"${newPerson.name}\" was NOT added to your phonebook`)\r\n       makeMessage(\"NOT ADDED. Error: \" + error.response.data.error)    \r\n      })\r\n\r\n    }\r\n  };\r\n\r\n  let searchInString = (str, subStr) => {\r\n    //console.log(str, subStr)\r\n    if (str.indexOf(subStr) >= 0) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n  //console.log(searchInString(persons[0].name.toLowerCase(), filterName.toLowerCase()))\r\n  let personsList = [];\r\n  if (filterName !== \"\") {\r\n    //když je filtr zaplý\r\n    console.log(\"FilterOn\");\r\n    // console.log(persons.filter( x => searchInString(x.name.toLowerCase(), filterName.toLowerCase())))\r\n    personsList = persons\r\n      .filter((x) =>\r\n        searchInString(x.name.toLowerCase(), filterName.toLowerCase())\r\n      )\r\n      .map((x) => (\r\n        <li key={x.name}>\r\n          {x.name} {x.number} <button onClick={() => deleteContact(x.id)}> Delete </button>\r\n        </li>\r\n      ));\r\n  } else {\r\n    //console.log(\"Filter OFF\")\r\n    personsList = persons.map((x) => (\r\n      <li key={x.name}>\r\n        {x.name} {x.number} <button onClick={() => deleteContact(x.id)}> Delete </button>\r\n      </li>\r\n    ));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Filter handleChangeFilter={handleChangeFilter} filterName={filterName} />\r\n      <h3>Add a new:</h3>\r\n      <PersonForm\r\n        newName={newName}\r\n        handleChangeName={handleChangeName}\r\n        newNumber={newNumber}\r\n        handleChangeNumber={handleChangeNumber}\r\n        addName={addName}\r\n      />\r\n\r\n      <Persons list={personsList} />\r\n      <Notification message={message} error={messageIsError}/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from \"./App\"\nimport \"./index.css\"\n\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}